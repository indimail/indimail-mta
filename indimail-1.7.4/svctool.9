.LL 8i
.TH svctool 8
.SH NAME
svctool \- IndiMail Service Configuration Tool

.SH SYNOPSYS
.B svctool
[
.I options
]

.SH DESCRIPTION

\fBsvctool\fR is a shell frontend for configuring IndiMail services, configuring
\fBIndiMail(7)\fR, taking backups of configuration and data. All services are configured to
run under \fBsupervise(8)\fR. \fBsupervise(8)\fR itself gets started by \fBsvscan(8)\fR. You
can install \fBsvscan(8)\fR to be started by the system using the command \fBinitsvc(1)\fR.

.EX
Known values for options are:

--smtp=Port --qbase=queue_path --qcount=N --qstart=I
    --servicedir=service_path --cntrldir=cntrl_path
    --localip=a --maxdaemons=m --maxperip=i
    [--mysqlhost=mysqlhost --mysqluser=mysqluser --mysqlpass=mysqlpass]
    [--persistdb]
    [--dnscheck]
    [--starttls]
    [--helofqdn --helocheck]
    [--fsync --syncdir]
    [--qregex]
    [--memory=b]
    [--overquota_mailsize=o]
    [--domainlimits]
    [--chkrecipient --cugmail --authsmtp --authall --chkrelay]
    [--masquerade] [--antispoof]
	[--routes=smtp|qmtp|static]
    [--deliverylimit-count=D --deliverylimit-size=S]
    [--rbl=list]
    [--content-filter=c]
    [--virus-filter=v]
    [--qhpsi=q]
    [--spamfilter=spamfilter_args]
    [--logfilter=filter_fifo]
    [--rejectspam=r --spamexitcode=e --localfilter --remotefilter]
    [--paranoid --dmasquerade]
    [--remote-authsmtp=b]
    [--odmr]
    [--ssl]
    [--dkverify=dk|dkim|both|none]
    [--dksign=dk|dkim|both|none --private_key=private_key]
    --default-domain=domain

 Installs a new queue with a SMTP Listener
  m              - Concurrency of connections to allow
  i              - Concurrency of connections to be allowed from a
                   single ip address
  a              - IP Address to listen
  N              - No of Queues
  I              - Numeral Prefix of first queue (i.e 1 for
                   INDIMAIL/queue1)
  M              - Minimum Disk Space to maintain in queue after which
                   Temporary error will be returned
  b              - Max Memory that SMTP can allocate
  D              - Max deliveries allowed per day for a user
  S              - Max sum total size of mails allowed per day for a user
  o              - Max size of mails to accept after user is overquota
  Port           - Bind on this port for SMTP
  service_path   - Path where supervise scripts will be installed
  queue_path     - Path where the queues are installed. If this is different
                   from INDIMAIL appropriate links will be created in
                   INDIMAIL
  cntrl_path     - Path where Qmail control files are stored
  domainlimits   - Apply Domain Limits configured by vmoddomlimits(1)
  chkrecipient   - Perform a User Status query before accepting mails
                   (qmail-smtpd)
  cugmail        - Allow only local valid senders to use SMTP.
  antispoof      - Turn on antispoofing code
  starttls       - Use TLS
  authsmtp       - Enforce Authenticated SMTP before accepting MAIL FROM
  authall        - Accept mails to remote/local domains only after AUTH SMTP or
                   POP/IMAP before SMTP
  chkrelay       - Accept mails to remote domains only after AUTH SMTP or
                   POP/IMAP before SMTP (closed relay)
  qregex         - Use regular expressions for matching entries in
                   badmailfrom, badrcptto, blackholedsenders, spamignore
                   relaymailfrom, authdomains, chkuserdomains
  q              - Full path to an external virus scanner (like clamdscan)
  v              - Enable Virus/Attachment scanner
                   1 - Internal Scanner
                   2 - Internal + External + Attachment Scan
                   3 - Internal + Attachment Scan
                   4 - External + Attachment Scan
                   5 - External Scanner
                   6 - Attachment Scan
  content-filter - Enable content filtering against regex in bodycheck control
                   file or the filename given as argument to content-filter
  c              - Optional filename passed to content-filter argument
  spamfilter     - Spamfilter program along with arguments
  filter_fifo    - Capture additional status message from spamfilter in 
                   smtpd logfile via filter_fifo
  r              - Mails get rejected as spam if exit status of spamfilter
                   equals the value of spamexitcode
                   0 - Do not reject SPAM mails
                   1 - Bounce SPAM Mails.
                   2 - Blackhole SPAM Mails
  e              - Exit value of spamfilter that should be treated as spam
  localfilter    - enable filtering of mails to qmail-local
  remotefilter   - enable filtering of mails to qmail-remote
  masquerade     - Allow user to change Mail From when using authenticated smtp
  routes         - Perform SMTPROUTE / QMTPROUTE / static routing
  rbl            - Deploy RBL lookups
  skipsend       - Skip creation of send script
  fsync          - Sync files and directories when writing files
  syncdir        - Use BSD style sync semantics for flushing directories
  dnscheck       - Check if mails can be sent to the sender domain 
                   (domain should have a proper MX record)
  helofqdn       - Enforce . in the argument to HELO/EHLO
  helocheck      - Check validity of HELO domain
                   (domain should have a proper MX record)
  remote-auth    - enable qmail-remote to use authenticated smtp
  b              - Authenticated SMTP method to use by qmail-remote
                   (plain, login, cram-md5)
  paranoid       - Paranoid hostaccess check
  dmasquerade    - Allow domains to be masqueraded from known IPs
  default-domain - default domain name for which this host will handle mails
  mysqlhost      - MySQL Host having authentication tables
  mysqluser      - Username for connecting to mysql
  mysqlpass      - Passwd for connecting to mysql
  odmr           - Setup SMTP for ODMR (On Demand Mail Relay)
  private_key    - Path to Private key created by dknewkey
  ssl            - Use SSL encrypted communication

--qmtp=Port --qbase=queue_path --qcount=N --qstart=I
	--servicedir=service_path --cntrldir=cntrl_path
	--localip=a --maxdaemons=m --maxperip=i
	[--fsync --syncdir]
	[--memory=b --min-free=M]
	[--qhpsi=q]
	[--spamfilter=spamfilter_args]
	[--logfilter=filter_fifo]
	[--rejectspam=r --spamexitcode=e]
	[--dkverify=dk|dkim|both|none]
	[--dksign=dk|dkim|both|none --private_key=private_key]

 Installs a new queue with a QMTP Listener
  m              - Concurrency of connections to allow
  i              - Concurrency of connections to be allowed from a
                   single ip address
  a              - IP Address to listen
  N              - No of Queues
  I              - Numeral Prefix of first queue (i.e 1 for INDIMAIL/queue/queue1)
  M              - Minimum Disk Space to maintain in queue after which
                   Temporary error will be returned
  b              - Max Memory that QMTP can allocate
  Port           - Bind on this port for QMTP
  service_path   - Path where supervise scripts will be installed
  queue_path     - Path where the queues are installed. If this is different from
                   INDIMAIL appropriate links will be created in
                   INDIMAIL
  cntrl_path     - Path where Qmail control files are stored
  fsync          - Sync files and directories when writing files
  syncdir        - Use BSD style sync semantics for flushing directories
  q              - Full path to an external virus scanner (like clamdscan)
  spamfilter     - Spamfilter program along with arguments

  filter_fifo    - Capture additional status message from spamfilter in 
                   smtpd logfile via filter_fifo
  r              - Mails get rejected as spam if exit status of spamfilter
                   equals the value of spamexitcode. r can have following values
                   0 - Do not reject SPAM mails
                   1 - Bounce SPAM Mails.
                   2 - Blackhole SPAM Mails
  e              - Exit value of spamfilter that should be treated as spam
  private_key    - Path to Private key created by dknewkey

--qmqp=Port --qbase=queue_path --qcount=N --qstart=I
	--servicedir=service_path --cntrldir=cntrl_path
	--localip=a --maxdaemons=m --maxperip=i
	[--fsync --syncdir]
	[--memory=b --min-free=M]
	[--qhpsi=q]
	[--spamfilter=spamfilter_args]
	[--logfilter=filter_fifo]
	[--rejectspam=r --spamexitcode=e]
	[--dkverify=dk|dkim|both|none]
	[--dksign=dk|dkim|both|none --private_key=private_key]

 Installs a new queue with a QMQP Listener
  m              - Concurrency of connections to allow
  i              - Concurrency of connections to be allowed from a
                   single ip address
  a              - IP Address to listen
  N              - No of Queues
  I              - Numeral Prefix of first queue (i.e 1 for INDIMAIL/queue/queue1)
  M              - Minimum Disk Space to maintain in queue after which
                   Temporary error will be returned
  b              - Max Memory that QMTP can allocate
  Port           - Bind on this port for QMTP
  service_path   - Path where supervise scripts will be installed
  queue_path     - Path where the queues are installed. If this is different from
                   INDIMAIL appropriate links will be created in
                   INDIMAIL
  cntrl_path     - Path where Qmail control files are stored
  fsync          - Sync files and directories when writing files
  syncdir        - Use BSD style sync semantics for flushing directories
  q              - Full path to an external virus scanner (like clamdscan)
  spamfilter     - Spamfilter program along with arguments

  filter_fifo    - Capture additional status message from spamfilter in 
                   smtpd logfile via filter_fifo
  r              - Mails get rejected as spam if exit status of spamfilter
                   equals the value of spamexitcode. r can have following values
                   0 - Do not reject SPAM mails
                   1 - Bounce SPAM Mails.
                   2 - Blackhole SPAM Mails
  e              - Exit value of spamfilter that should be treated as spam
  private_key    - Path to Private key created by dknewkey

--greylist=port --min-resend-min=m --resend-win-hr=g --timeout-days=t
        --context-file=f --save_interval=s --whitelist=w --hash-size=s
        --use-greydaemon

  Installs a new Greylist Daemon
  Port           - Bind on this port for qmail-greyd
  service_path   - Path where supervise scripts will be installed
  m              - Minimum resend time after which mail will be accepted
  g              - Window in which mail must be seen
  t              - Max period for a mail to be received after which IP will be removed
                   from whitelist
  s              - Size of hash table (0 to disable hashing)
  context_file   - File in which context information is saved for startup
  save_interval  - Time interval in which context file gets saved
  whitelist      - List of whitelisted IP
  use-greydaemon - Use John Levine's greydaemon

--imap=Port --servicedir=service_path
    --localip=a --maxdaemons=m --maxperip=i
    --default-domain=domain
    [--domainlimits --nolastauth]
    [--proxy=destport]
    [--legacyserver]
    [--postmaster=user[@domain]]
	[--ssl|--tlsprog|--starttls]

  Installs a new IMAP4 Listner
  Port           - Bind on this port for IMAP
  service_path   - Path where supervise scripts will be installed
  domainlimits   - Apply Domain Limits configured by vmoddomlimits(1)
  nolastauth     - Do not update lastauth
  proxy          - Install as a proxy and connect to actual imap on destport
  legacyserver   - To be set if destination IMAP server is not Indimail's
                   IMAP server
  postmaster     - name of the user who will be the contact for Certificates.
  ssl            - Use SSL encrypted communication
  tlsprog        - External progam to enable TLS session
  starttls       - Advertise STARTTLS capability
  m              - Concurrency of connections to allow
  i              - Concurrency of connections to be allowed from a
                   single ip address
  a              - IP Address to listen
  default-domain - default domain name for which this host will handle mails

--pop3=Port --servicedir=service_path
    --localip=a --maxdaemons=m --maxperip=i
    --default-domain=domain
    [--domainlimits --nolastauth]
    [--proxy=destport]
    [--legacyserver]
    [--postmaster=user[@domain]]
	[--ssl|--tlsprog|--starttls]

  Installs a new POP3 Listner
  Port           - Bind on this port for POP3
  service_path   - Path where supervise scripts will be installed
  domainlimits   - Apply Domain Limits configured by vmoddomlimits(1)
  nolastauth     - Do not update lastauth
  proxy          - Install as a proxy
  legacyserver   - To be set if destination POP3 server is not Indimail's
                   POP3 server
  postmaster     - name of the user who will be the contact for Certificates.
  ssl            - Use SSL encrypted communication
  tlsprog        - External progam to enable TLS session
  starttls       - Advertise STARTTLS capability
  m              - Concurrency of connections to allow
  i              - Concurrency of connections to be allowed from a
                   single ip address
  a              - IP Address to listen
  default-domain - default domain name for which this host will handle mails

--inlookup=fifo_path --threads=N
    --domainlimits
    --servicedir=service_path --cntrldir=cntrl_path
    [--password-cache] [--query-cache]
	[--routes=smtp|qmtp|static]

  Installs a new IndiMail Name Lookup Server
  fifo_path      - Install fifo specified by this path
                   (e.g. INDIMAIL/control/inquery/infifo)
  N              - No of parallel inlookup threads to spawn
  service_path   - Path where supervise scripts will be installed
  cntrl_path     - Path where Qmail control files are stored
  domainlimits   - Apply Domain Limits configured by vmoddomlimits(1)
  password-cache - Enable caching of passwords
  query-cache    - Enable caching of queries
  routes         - Perform SMTPROUTE / QMTPROUTE / static routing

--pwdlookup=socket_path --threads=N --timeout=t
    [--mysqlhost=mysqlhost --mysqluser=mysqluser --mysqlpass=mysqlpass]
    [--mysqlport=port | --mysqlsocket=socket]
    --servicedir=service_path

  Installs a new Name Service Password Lookup Daemon
  socket_path    - Use socket_path as communication between
                   NSS clients and NSS Password Lookup server
  N              - No of parallel pwdlookup threads to spawn
  t              - Timeout wait for new Password Request
  mysqlhost      - MySQL Host having authentication tables
  mysqluser      - Username for connecting to mysql
  mysqlpass      - Passwd for connecting to mysql
  mysqlport      - Port for connecting to mysql
  mysqlsocket    - Unix Domain Socket for connecting to mysql
  service_path   - Path where supervise scripts will be installed

--indisrvr=Port --mysqlhost=mysqlhost --mysqluser=mysqluser
    --mysqlpass=mysqlpass
    --localip=a --maxdaemons=m --maxperip=i
    --domainlimits
    --avguserquota=quota --hardquota=quota
    --base_path=path --servicedir=service_path

  Installs a new Indi Admin Server
  Port           - TCP/IP port on which to bind
  mysqlhost      - MySQL Host having authentication tables
  mysqluser      - Username for connecting to mysql
  mysqlpass      - Passwd for connecting to mysql
  avguserquota   - Average Usage per user in Bytes
  hardqutoa      - Max Quota for a user
  base_path      - Default Filesystem Path for user mailbox creation
  m              - Concurrency of connections to allow
  i              - Concurrency of connections to be allowed from a
                   single ip address
  a              - IP Address to listen
  service_path   - Path where supervise scripts will be installed
  domainlimits   - Apply Domain Limits configured by vmoddomlimits(1)

--mysql=mysqlport --mysqlPrefix=mysqlPrefix --databasedir=databasedir
    --config=conf_file --servicedir=service_path
    [--mysqlsocket=socket]
    [--default-domain=domain]
    [--model=small|medium|large|huge]
    [--no-of-cpu=n]

  Installs a new MySQL Server
  mysqlport      - Install MySQL to listen on this port
  mysqlPrefix    - Installation Prefix for mysql
  databasedir    - Directory containing the Database and Logs
  mysqlsocket    - Unix Domain Socket for connecting to mysql
  config         - MySQL Configuration file (e.g.
                   INDIMAIL/etc/indimail.cnf)
  service_path   - Path where supervise scripts will be installed
  default-domain - default domain name for which this host will handle mails
  model          - Your Server model
  n              - No of CPU's on your server

--fetchmail --qbase=queue_path --qcount=N --qstart=I --servicedir=service_path
    --cntrldir=cntrl_path
    --default-domain=domain
    [--silent]
    [--fsync --syncdir]
    [--domainlimits]
    [--memory=b --min-free=M]
    [--spamfilter=spamfilter_args]
    [--rejectspam=r --spamexitcode=e]
    [--qhpsi=q]
    [--dkverify=dk|dkim|both|none]

  Install Fetchmail Server
  queue_path     - Path where the queues are installed. If this is different
                   from INDIMAIL appropriate links will be created in
                   INDIMAIL
  N              - No of Queues
  I              - Numeral Prefix of first queue
                   (i.e 1 for INDIMAIL/queue1)
  M              - Minimum Disk Space to maintain in queue after which
                   Temporary error will be returned
  b              - Max Memory that Fetchmail can allocate
  service_path   - Path where supervise scripts will be installed
  cntrl_path     - Path where Qmail control files are stored
  fsync          - Sync files and directories when writing files
  syncdir        - Use BSD style sync semantics for flushing directories
  silent         - Display minimal output on stdout
  domainlimits   - Apply Domain Limits configured by vmoddomlimits(1)
  q              - Full path to an external virus scanner (like clamdscan)
  spamfilter     - Spamfilter program along with arguments
  filter_fifo    - Capture additional status message from spamfilter in 
                   spam logfile via filter_fifo
  r              - Mails get rejected as spam if exit status of spamfilter
                   equals the value of spamexitcode
                   0 - Do not reject SPAM mails
                   1 - Bounce SPAM Mails.
                   2 - Blackhole SPAM Mails
  e              - Exit value of spamfilter that should be treated as spam
  default-domain - default domain name for which this host will handle mails

--qscanq --servicedir=service_path --clamdPrefix=clamdPrefix [--scanint=n]

  service_path - Path where supervise scripts will be installed
  clamdPrefix  - Installation Prefix for clamd
  n            - Scan interval for Virus scanning

--poppass=Port --localip=a --setpassword=cmd --maxdaemons=m --maxperip=i
    [--certfile=certificate --ssl]
  Port           - TCP/IP port on which to bind
  m              - Concurrency of connections to allow
  i              - Concurrency of connections to be allowed from a
                   single ip address
  a              - IP Address to listen
  cmd            - Path of a setpassword compatible program
  certficate     - Path to openssl certificate
  ssl            - Use SSL encrypted communication

  Installs a new IndiMail poppassd Server

--config=mysql|mysqldb|imap|pop3|qmail|users|rmusers|clamd|bogofilter|cert
    [--postmaster=user[@domain]]
    [--default-domain=domain]
    [--mysqlPrefix=mysqlPrefix]
    [--databasedir=databasedir]
    [--model=small|medium|large|huge]
    [--no-of-cpu=n]
    [--use-grant]
    [--stdout]
    [--wipe]

  mysql          - Create INDIMAIL/etc/indimail.cnf
  imap           - Create INDIMAIL/etc/imapd
  pop3           - Create INDIMAIL/etc/pop3d
  qmail          - Create default qmail control files
  users          - Create Internal System Users used by IndiMail
  rmusers        - Remove Internal System Users used by IndiMail
  clamd          - Create clamd configuration file
  bogofilter     - Create INDIMAIL/etc/bogofilter.cf configuration file
  cert           - Generate SSL Certificate
  all            - Create All the above configuration files
  postmaster     - name of the user who will recieve bounces on the local host.
                   This can also be a remote user i.e. &postmaster@indi.com
  default-domain - default domain name for which this host will handle mails
  mysqlPrefix    - Installation Prefix for mysql
  databasedir    - Directory containing the Database and Logs
  model          - Your Server model
  n              - No of CPU's on your server
  use-grant      - Use the usual create user and grant statements for
                   creating users (implies --stdout)
  stdout         - Dump on the screen. Will not create a configuration
  wipe           - will wipe out users/assign (for config=qmail)

--rmsvc=service

  Disable supervise scripts for service
  service        - name of service with full path
                   e.g. (/service/smtpd.25)
                   (give multiple services enclosed in double quotes)
                   "/service/smtpd.25 /service/imapd.143"

--ensvc=service

  Enable supervise scripts for service
  service        - name of service with full path
                   e.g. (/service/.smtpd.25)
                   (give multiple services enclosed in double quotes)
                   "/service/.smtpd.25 /service/.imapd.143"

--svscanlog --servicedir=service_path

  service_path - Path where supervise scripts will be installed

--inittab --servicedir=service_path

  service_path - Path where supervise scripts will be installed

--queuefix=queue_path

  Fix Qmail Queue where queue_path is the absolute path of a queue

--repair-tables
  Repair MySQL tables

--check-install --servicedir=service_path --qbase=queue_path --qcount=N --qstart=I

  service_path - Path where supervise scripts have been installed
  queue_path   - Path where the queues are installed.
  N            - No of Queues
  I            - Numeral Prefix of first queue (i.e 1 for INDIMAIL/queue1)

--showctl=DIR

  Shows Qmail Control Information for Control Directory at DIR

--report=all| zddist| zdeferrals| zfailures| zoverall| zrecipients| zrhosts|
    zrxdelay| zsenders| zsendmail| zsuccesses| zsuids | zsmtp | zspam
    [--postmaster=user[@domain]]
    [--attach]
    [--logdir=multilog_base_dir]

  postmaster - name of the user who will recieve the report.
  attach     - zip and send the report as an attachment

--dumpconfig --servicedir=service_path --controldir=controldir

  Dumps all service configuration for Supervise Scripts, control
  files and software information
  service_path - Path where supervise scripts will be installed
  controldir   - Path where qmail/indimail control files lie

--backup=backupdir --servicedir=service_path --mysqlPrefix=mysqlPrefix

  mysqlPrefix  - Installation Prefix for mysql
  backupdir    - Directory to dump backup

--help

  display this help and exit

--version

  output version information
.EE

.SH RETURN VALUE
\fBsvctool\fR returns non-zero status on error.

.SH "SEE ALSO"
IndiMail(7), initsvc(1), svscan(8), svstat(8), svc(8), supervise(8)
