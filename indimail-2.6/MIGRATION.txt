Migration from indimail 1.x to 2.x

Summary
=======
Following directories do not change

/service
/var/indimail/domains
/var/indimail/queue
/var/indimail/mysqldb
/var/indimail/alias
/var/indimail/autoturn
/var/indimail/clamd
/var/indimail/qscanq

indimail-1.x had everything contained under /var/indimail. indimail-2.x
follows linx Filesystem Hierarchy Standard 2.0. The changes are following

o. user binaries go to /usr/bin
o. system binaries go to /usr/sbin
o. scripts / binaries in /var/indimail/libexec go to /usr/libexec/indimail
o. imap modules in /var/indimail/libexec/authmodules go to
   /usr/libexec/indimail/imapmodules
o. documentation, boot scripts to to dirs in /usr/share/indimail
o. indimail modules, plugins go to dirs in /usr/lib/indimail
o. all certificates in /var/indimail/control go to /etc/indimail/certs
o. all tcp config files in /var/indimail/etc go to /etc/indimail/tcp

One needs to do a recursive listing of /var/indimail/control and confirm the
destination of each and every file. The script migrate1to2 helps in migrating
from indimail 1.x to indimail 2.x.

Migration Steps
===============
1.  run migration script. If it succeeds, you can go ahead & migrate
    else you will have to review the errors
    # ./migrate1to2
2.  shutdown indimail
3.  take a backup of /service /var/indimail /etc/passwd /etc/group
4.  rename few directories
    # mv /var/indimail /var/indimail.org
    # mv /service /service.org
5.  Remove indimail (ignore errors on missing /var/indimail)
    # rpm -e indimail
6.  Replace few directories / files
    replace original /etc/passwd, /etc/group
    # mv /var/indimail.org /var/indimail
7.  install indimail
    # yum install indimail
8.  /bin/rm -r /service.org/*/supervise /service.org/*/log/supervise
9.  do a diff between new /service and original /service.org
    # diff -Naur /service /service.org > /tmp/service_diff.txt
10. review the diff in /tmp/service_diff.txt and make
    necessary changes
11. start indimail
12. Check smtpd, imapd, pop3d logs
