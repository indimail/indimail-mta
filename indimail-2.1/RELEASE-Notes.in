RELEASE NOTES
=============
DATE: @DATE@

This is Release @version@ of IndiMail. The release has both source.tar.gz, RPMs and debs.

  o quoted svctool arguments and save install time arguments in variables/.options file
  o fixed lang and html directory location to /usr/share/iwebadmin
  o iwebadmin (user.c) - vsetuserquota returns current quota usage and -1 in case of error.
  o iwebadmin should treat only -1 as error.
  o Added roundcube plugins, (sauserprefs, markasjunk2) - bogofilter spam training, (iwebadmin) - for setting autoresponder and passwd change
  o update_tmprsadh, svctool, spec files, debian postinst, postrm - updated certificate location to sysconfdir/certs
  o qmail-smtpd, qmail-remote - Env variable CERTDIR to override /etc/indimail/control for certificate location
  o Permissions of supervise directory changed to onwer root:indimail 750 for services using MAXDAEMONS
  o renamed qmail-spamfifo service to qmail-logfifo
  o Changed inquery path. Added infifo argument for smtp/pop3/imap creation in
  o Added FIFODIR env variables for infifo location (inlookup, smtp/pop3/imap services) svctool, spec file, debian postinst, create_services
  o Added back AutoReqProv in spec file to provide shared libraries
  o Upgraded to courier-imap-4.17.3
  o added upgrade script upgrade.sh, local_upgrade.sh
  o update_tmprsadh - added rsa2048.pem, dh2048.pem
  o ucspi-tcp - control_readline() did not use CONTROLDIR. Caused problem with qmail_smtpd.so plugin which used the same symbol and was unable to load control files.
  o fixed conf_dir variable getting clobbered by qmail-logfifo service creation.
  o create tlsservermethod control file in svctool --config=qmail
  o Increased compile time default quota for users to 500 MiB from earlier value of 5 MiB
  o renamed functions in ucspi-tcp (rblsmtpd.so) to avoid duplicate symbols with qmail_smtpd.so
  o use RTLD_DEEPBIND (if present) in load_shared.c to avoid duplicate symbols when loading multiple shared libs
  o fixed paths in crontab file
  o set DEFAULT_DOMAIN in qmail-send.25/variables as the hostname to handle double bounces better
  o qmail-todo, qmail-send - display null email address as <> in log_stat()
  o svctool --config=qmail - set envnoathost, defaulthost = hostname 
  o local_upgrade.sh - fix DEFAULT_HOST, QMAILDEFAULTHOST, envnoathost, defaulthost settings
  o svctool - MRTG graphs, added --mrtg option
  o indimail.mrtg.cfg - New graphs added
  o qmailmrtg7.c - added debug option
  o indimai.spec - added mrtg in Requires
  o mrtg service moved to /service/mrtg from cronlist
  o added error logging for iwebadmin
  o local_upgrade.sh added FIFODIR env variable
  o iwebadmin.h - Increaed MAX_LANG_STR length
  o util.c - undefine SORT_TABLE_ENTRIES
  o iwebadmin - Added Content-type, Content-transfer-encoding headers to lang/en
  o iwebadmin - Reserved language template file codes 400 through 450 for custom autoresponder headers
  o iwebadmin - Added url for indimail MRTG graphs
  o iwebadmin - templace.c - skip custom headers
  o iwebadmin - maillinglist.c - changes for ezmlm-idx-7.x
  o iwebadmin - mailinglist.c - fixed syntax error when compiling on host with ezmlm-idx
  o indimail.te - added rename cabability for iwebadmin on var_t
  o replace dlopen() with dlmopen to keep tcpserver namespace private
  o added dlnamespace for using dlmopen()
  o tcpserver.c, prot.c - Changed data types for uid, gid to uid_t, gid_t
  o Bug with dlmopen(), glibc wrappers for setgroups, setgid, setuid - use syscall for setgroups, setgid, setuid
  o tcpserver - execute tcpserver_plugin after shedding root privileges
  o indimail.postinst.in, indimail.spec, local_upgrade.sh,
  o iwebadmin.spec - added ezmlm-idx > 7.2 in Requires: indimail-mta.postinst.in, indimail-mta.spec - upgraded softmem to 536870912
  o svctool - Fixed couriersslcache path
  o dlnamespace.c - added comments
  o qmail-remote.c - fixed tls_quit() function. Avoid mixed usage of tls_quit() and quit() functions
  o debian - replaced tcl8.4-dev with tcl-dev in indium dsc file
  o debian - replaced mutiple dsc files with single dsc file
  o debian - use dh_install in rules to fix broken build bogofilter-wordlist, indium, iwebadmin
  o qmail-remote.c, rrt.c - renamed ONTRANSIENT_REMOTE to ONTEMPORARY_REMOTE
  o qmail-rspawn.c Unset QMAILLOCAL in parent & not in child after vfork
  o perms of /etc/indimail and subdirectory changed to 2775
  o qmail-remote.c - use SMTPS if env variable SMTPS is set
  o qmail-queue.c - fixed envheader. variable x renamed to field_len and initialized to prevent skipping.
  o tinydnssec-1.05 package added. Default installation provides caching dns
  o added selinux rules for tinydnssec
  o fixed sysconfdir and sysconfdir subdir permissions
  o use #ifdef HASDLMOPEN to use dlmopen() if present
  o tcpserver_plugin.c - use PLUGINn_DIR variable to change directory independent of PLUGINn_init env variable
  o create queue base directory in setup
  o report programs moved to libexecdir
  o surblqueue - fixed qmail-multi path
  o fixed search using hsearch in qmail-greyd.c
  o tcpserver - load_shared.c - print lmid only during reload
  o moved qmail-greyd, greydaemon, surblfilter, surbqueue to /usr/sbin
  o use lockfile .svlock in service directory to prevent multiple svscan to run on a service directory
  o Major cleanup of indimail.spec, indimail-mta.spec. Removed deletion of files and leave it for rpm -e to do its job
  o dlnamespace.c, tcpserver_plugin.c, load_shared.c, pathexec_env.c added code to get namespace of shared libraries using env variables / envp variable.  use pathexec_dl to execute loaded function 
  o qmailctl.sh - added multilog rotate command
  o indimail-mta - install crontab entries for indimail-mta
  o indimail debian - install crontab entries for indimail
  o qmail-smtpd - Updated documentation on LOGFILTER
  o qmail-smtpd - renamed LOGFILTER_FD to LOGFD
  o added dqcache, dnscurve
  o indimail, indimail-mta - shutdown indimail service in preun
  o tinydnssec - fixed typo in debian/postrm.in
  o tinydnssec (rpm, debian) - create tinydnssec, dqcache, curvedns service config
  o tinydnssec - added dqcache-conf, curvedns-conf programs
  o tinydnssec - added SRV patch
  o indimail, indimail-mta (rpm, debian) - use svok to figure out if service is up
  o indimail - debian scripts cleanup
  o svctool - fixed inverted cname-lookup
  o indimail, indimail-mta (rpm, debian) - removed duplicate calls to shutdown indimail service
  o tinydnssec - added compile time option to add dnssec, dnscurve support
  o indimail, indimail-mta (rpm, debian) - use sed to edit inittab
  o indimail Makefile.am - removed useless linking if libindimail with other libs
  o indimail-mta - added svctool man page
  o indimail-mta - fixed sysconfdir variable in debian scripts
  o OSx indimail.plist - fixed svscanboot path
  o indimail.h - changed timestamp columns default to CURRENT_TIMESTAMP
  o deldomain.c - fixed incorrect handling of return status from del_control()
  o findhost.c - fixed recursive loop in findhost.c if hostcntrl was empty
  o vdeldomain.c - fixed deletion of mcdinfo
  o vauth_deldomain.c - remove alias entries added by vadddomain for a clustered domain
  o made --enable-large-site=y and --enable-user-cluster=y incompatible
  o removed mailing list code from vfilter
  o fixed DESTDIR in qmail-1.03, ucspi-tcp-1.03 Makefile, setup.c
  o fixed tlsclientmethod path in qmail-remote
  o cleanq.c - refactored code. added checks for safety
  o setup.c, instcheck.c - added logdir
  o svctool - added --skip-sendmail option to disable checking sendmail path in /usr/lib, /usr/sbin
  o Added default.configure in all source directories for source compilation using git repo
  o create_services - added --nomysql  option to skip configuring of mysql services

This release includes the following files

README-@version@                (Introduction to IndiMail)
INSTALL-@version@               (Source Installation Instructions)
INSTALL-RPM-@version@           (Install Instructions using RPM)
INSTALL-MYSQL-@version@         (MySQL specific Installation Instructions)
README-CLUSTER              (Steps on configuring a clustered setup)
Quick-INSTALL-@version@         (A minimal documentation on Installation/Configuration)
RELEASE-Notes-@version@         (This file)
indimail-@version@.tar.gz       (IndiMail source)


IndiMail has two RPM / DEB / yum / apt repositories for most of the Linux Distros at

Stable Releases
---------------

Repository Location
http://download.opensuse.org/repositories/home:/indimail/

Install Instructions
https://software.opensuse.org/download.html?project=home%3Aindimail&package=indimail


Bleeding Edge Releases
----------------------
IndiMail has RPM / yum repositories for the latest features being added. You will find
the RPMs at

Repository Location
http://download.opensuse.org/repositories/home:/mbhangui/

Install Instructions
https://software.opensuse.org/download.html?project=home%3Ambhangui&package=indimail


Currently, the list of supported distributions for IndiMail is

    * SUSE
          o openSUSE_Leap_42.2
          o openSUSE 13.2
          o openSUSE 13.1
          o SUSE Linux Enterprise 12 SP2
          o SUSE Linux Enterprise 12 SP1
          o SUSE Linux Enterprise 12

    * Red Hat
          o Fedora 25
          o Fedora 24
          o Red Hat Enterprise Linux 7
          o Red Hat Enterprise Linux 6
          o CentOS 7
          o CentOS 6

    * Debian
          o Debian 8.0
          o Debian 7.0
          o Ubuntu 16.10
          o Ubuntu 16.04


ChangeLog
=========
Release 2.1 Start 16/03/2017
1.   quoted svctool arguments and save install time arguments in variables/.options
     file
2.   fixed lang and html directory location to /usr/share/iwebadmin
3.   iwebadmin (user.c) - vsetuserquota returns current quota usage and -1 in case of error.
     iwebadmin should treat only -1 as error.
4.   Added roundcube plugins, (sauserprefs, markasjunk2) - bogofilter spam
     training, (iwebadmin) - for setting autoresponder and passwd change
5.   update_tmprsadh, svctool, spec files, debian postinst, postrm - updated certificate
     location to sysconfdir/certs
6.   qmail-smtpd, qmail-remote - Env variable CERTDIR to override
     /etc/indimail/control for certificate location
7.   Permissions of supervise directory changed to onwer root:indimail 750
    for services using MAXDAEMONS
8.   renamed qmail-spamfifo service to qmail-logfifo
9.   Changed inquery path. Added infifo argument for smtp/pop3/imap creation in
10.  Added FIFODIR env variables for infifo location (inlookup, smtp/pop3/imap
     services)
     svctool, spec file, debian postinst, create_services
11.  Added back AutoReqProv in spec file to provide shared libraries
12.  Upgraded to courier-imap-4.17.3
13.  added upgrade script upgrade.sh, local_upgrade.sh
14.  update_tmprsadh - added rsa2048.pem, dh2048.pem
15.  ucspi-tcp - control_readline() did not use CONTROLDIR. Caused problem with
     qmail_smtpd.so plugin which used the same symbol and was unable to load
     control files.
16.  fixed conf_dir variable getting clobbered by qmail-logfifo service creation.
17.  create tlsservermethod control file in svctool --config=qmail
18.  Increased compile time default quota for users to 500 mb from earlier
     value of 5 mb
19.  renamed functions in ucspi-tcp (rblsmtpd.so) to avoid duplicate symbols with
     qmail_smtpd.so
20.  use RTLD_DEEPBIND (if present) in load_shared.c to avoid duplicate symbols
     when loading multiple shared libs
21.  fixed paths in crontab file
22.  set DEFAULT_DOMAIN in qmail-send.25/variables as the hostname to handle
     double bounces better
23   qmail-todo, qmail-send - display null email address as <> in log_stat()
24.  svctool --config=qmail - set envnoathost, defaulthost = hostname 
25.  local_upgrade.sh - fix DEFAULT_HOST, QMAILDEFAULTHOST, envnoathost,
     defaulthost settings
26.  svctool - MRTG graphs, added --mrtg option
27.  indimail.mrtg.cfg - New graphs added
28.  qmailmrtg7.c - added debug option
29.  indimai.spec - added mrtg in Requires
30.  mrtg service moved to /service/mrtg from cronlist
31.  added error logging for iwebadmin
32.  local_upgrade.sh added FIFODIR env variable
33.  iwebadmin.h - Increaed MAX_LANG_STR length
34.  util.c - undefine SORT_TABLE_ENTRIES
35.  iwebadmin - Added Content-type, Content-transfer-encoding headers to lang/en
36.  iwebadmin - Reserved language template file codes 400 through 450 for custom autoresponder headers
37.  iwebadmin - Added url for indimail MRTG graphs
38.  iwebadmin - templace.c - skip custom headers
39.  iwebadmin - maillinglist.c - changes for ezmlm-idx-7.x
40.  iwebadmin - mailinglist.c - fixed syntax error when compiling on host with
     ezmlm-idx
41.  indimail.te - added rename cabability for iwebadmin on var_t
42.  replace dlopen() with dlmopen to keep tcpserver namespace private
43.  added dlnamespace for using dlmopen()
44.  tcpserver.c, prot.c - Changed data types for uid, gid to uid_t, gid_t
45.  Bug with dlmopen(), glibc wrappers for setgroups, setgid, setuid - use syscall for setgroups, setgid, setuid
46.  tcpserver - execute tcpserver_plugin after shedding root privileges
47.  indimail.postinst.in, indimail.spec, local_upgrade.sh,
48.  iwebadmin.spec - added ezmlm-idx > 7.2 in Requires:
49.  indimail-mta.postinst.in, indimail-mta.spec - upgraded softmem to 536870912
50.  svctool - Fixed couriersslcache path
51.  dlnamespace.c - added comments, replace back ':' character removed before
     string comparision
52.  qmail-remote.c - fixed tls_quit() function. Avoid mixed usage of
     tls_quit() and quit() functions
53.  debian - replaced tcl8.4-dev with tcl-dev in indium dsc file
54.  debian - replaced mutiple dsc files with single dsc file
55.  debian - use dh_install in rules to fix broken build bogofilter-wordlist,
     indium, iwebadmin
56.  qmail-remote.c, rrt.c - renamed ONTRANSIENT_REMOTE to ONTEMPORARY_REMOTE
57.  qmail-rspawn.c Unset QMAILLOCAL in parent & not in child after vfork
58.  perms of /etc/indimail and subdirectory changed to 2775
59.  qmail-remote.c - use SMTPS if env variable SMTPS is set
60.  qmail-queue.c - fixed envheader. variable x renamed to field_len and
     initialized to prevent skipping.
61.  tinydnssec-1.05 package added. Default installation provides caching dns
62.  added selinux rules for tinydnssec
63.  fixed sysconfdir and sysconfdir subdir permissions
64.  use #ifdef HASDLMOPEN to use dlmopen() if present
65.  tcpserver_plugin.c - use PLUGINn_DIR variable to change directory independent of PLUGINn_init
     env variable
66.  create queue base directory in setup
67.  report programs moved to libexecdir
68.  surblqueue - fixed qmail-multi path
69.  fixed search using hsearch in qmail-greyd.c
70.  tcpserver - load_shared.c - print lmid only during reload
71.  moved qmail-greyd, greydaemon, surblfilter, surbqueue to /usr/sbin
72.  use lockfile .svlock in service directory to prevent multiple svscan
     to run on a service directory
73.  Major cleanup of indimail.spec, indimail-mta.spec. Removed deletion of
     files and leave it for rpm -e to do its job
74.  dlnamespace.c, tcpserver_plugin.c, load_shared.c, pathexec_env.c added code
     to get namespace of shared libraries using env variables / envp variable.
     use pathexec_dl to execute loaded function 
75.  qmailctl.sh - added multilog rotate command
76.  indimail-mta - install crontab entries for indimail-mta
77.  indimail debian - install crontab entries for indimail
78.  qmail-smtpd - Updated documentation on LOGFILTER
79.  qmail-smtpd - renamed LOGFILTER_FD to LOGFD
80.  added dqcache, dnscurve
81.  indimail, indimail-mta - shutdown indimail service in preun
82.  tinydnssec - fixed typo in debian/postrm.in
83.  tinydnssec (rpm, debian) - create tinydnssec, dqcache, curvedns service config
84.  tinydnssec - added dqcache-conf, curvedns-conf programs
85.  tinydnssec - added SRV patch
86.  indimail, indimail-mta (rpm, debian) - use svok to figure out if service is up
87.  indimail - debian scripts cleanup
88.  svctool - fixed inverted cname-lookup
89.  indimail, indimail-mta (rpm, debian) - removed duplicate calls to shutdown indimail service
90.  tinydnssec - added compile time option to add dnssec, dnscurve support
81.  indimail, indimail-mta (rpm, debian) - use sed to edit inittab
92.  indimail Makefile.am - removed useless linking if libindimail with other
     libs
93.  indimail-mta - added svctool man page
94.  indimail-mta - fixed sysconfdir variable in debian scripts
95.  OSx indimail.plist - fixed svscanboot path
96.  indimail.h - changed timestamp columns default to CURRENT_TIMESTAMP
97.  deldomain.c - fixed incorrect handling of return status from del_control()
98.  findhost.c - fixed recursive loop in findhost.c if hostcntrl was empty
99.  vdeldomain.c - fixed deletion of mcdinfo
100. vauth_deldomain.c - remove alias entries added by vadddomain for a clustered domain
101. made --enable-large-site=y and --enable-user-cluster=y incompatible
102. removed mailing list code from vfilter
103. fixed DESTDIR in qmail-1.03, ucspi-tcp-1.03 Makefile, setup.c
104. fixed tlsclientmethod path in qmail-remote
106. cleanq.c - refactored code. added checks for safety
107. setup.c, instcheck.c - added logdir
108. svctool - added --skip-sendmail option to disable checking sendmail path
     in /usr/lib, /usr/sbin
109. Added default.configure in all source directories for source compilation
     using git repo
110. create_services - added --nomysql  option to skip configuring of mysql services
