#!/bin/sh
#
# $Log: ip-up.local.in,v $
# Revision 1.3  2008-06-20 20:51:11+05:30  Cprogrammer
# moved writefifo to sbin
#
# Revision 1.2  2005-06-26 12:55:19+05:30  Cprogrammer
# create FIFO if ppp0 brings up IP faster than slemslite.up script creates .wakeup fifo
#
# Revision 1.1  2003-12-13 16:14:23+05:30  Cprogrammer
# Initial revision
#
#
if [ " $IPLOCAL" = " " ] ; then
	exit 1
else
	route add default gw $IPLOCAL
	i=1
	while true
	do
		if [ -p /tmp/.wakeup ] ; then
			@prefix@/sbin/writefifo /tmp/.wakeup
			break
		fi
		sleep 1
		i=`expr $i + 1`
		if [ $i -eq 60 ] ; then
			if [ ! -p /tmp/.wakeup ] ; then
				mkfifo /tmp/.wakeup
			fi
			echo > /tmp/.wakeup &
			exit 1
		fi
	done
	exit 0
fi
