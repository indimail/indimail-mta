.\"  <!-- $Id: deliverquota.sgml,v 1.3 2002/06/10 03:51:44 mrsam Exp $ -->
.\"  <!-- Copyright 1998 - 2001 Double Precision, Inc.  See COPYING for -->
.\"  <!-- distribution information. -->
.\" This manpage has been automatically generated by docbook2man 
.\" from a DocBook document.  This tool can be found at:
.\" <http://shell.ipoline.com/~elmert/comp/docbook2X/> 
.\" Please send any bug reports, improvements, comments, patches, 
.\" etc. to Steve Cheng <steve@ggi-project.org>.
.TH "DELIVERQUOTA" "8" "02 September 2004" "Double Precision, Inc." ""

.SH NAME
deliverquota \- deliver to a maildir with a quota
.SH SYNOPSIS

\fBdeliverquota\fR [ \fB-c\fR ] [ \fB-w \fIpercent\fB\fR ] \fB\fImaildir\fB\fR \fB\fIquota\fB\fR

.SH "DESCRIPTION"
.PP
\fBdeliverquota\fR delivers mail to a
\fImaildir\fR taking into account any
software-imposed quota on the maildir.
This manually-enforced quota mechanism is described in the
\fBmaildirquota\fR(7)
and
\fBmaildirmake\fR(1)
manual pages.
Instead of setting up your mail
server to deliver the message directly
to a maildir, configure the mail server to
run the \fBdeliverquota\fR program in order to deliver the
message,
and specify the
location of the maildir as the argument to
\fBdeliverquota\fR\&.
.PP
The second argument to \fBdeliverquota\fR is optional.
If present, \fIquota\fR specifies a new quota setting
for this maildir.
Specifying \fIquota\fR is equivalent to running
\fBmaildirmake\fR(1)
with the \fB-q\fR option.
The second argument to \fBdeliverquota\fR is considered obsolete,
and may be removed in the future.
.PP
\fBdeliverquota\fR reads the message from standard input
and delivers it
to \fImaildir\fR\&.
\fImaildir\fR
may specify a path directly to a maildir folder,
not the main \fImaildir\fR
(as long as the folder was created by the
\fBmaildirmake\fR(1) command.
.PP
The \fB-c\fR option automatically creates the maildir,
and all missing parent subdirectories (as '\fBmkdir -p\fR\&').
This option should be used with caution.
.PP
The \fB-w N\fR option places a warning message
into the maildir if the maildir has a quota setting, and after
the message was successfully delivered the maildir was at least
\fIN\fR percent full.
The warning message is copied verbatim from
\fI@sysconfdir@/quotawarnmsg\fR with the addition of the
"Date:" and
"Message-Id:" headers.
The warning is repeated every 24 hours (at least), until the maildir drops
below
\fIN\fR percent full.
.SH "RETURN CODE"
.PP
\fBdeliverquota\fR delivers the message to the maildir
and terminates with
exit code 0 if the message can be delivered without going over quota.
.PP
If the maildir is over its specified quota, \fBdeliverquota\fR
terminates with exit code 77 (EX_NOPERM).
.SH "SEE ALSO"
.PP
\fBmaildirquota\fR(7),
\fBmaildirmake\fR(1),
http://www.qmail.org/man/man5/maildir.html\&.
