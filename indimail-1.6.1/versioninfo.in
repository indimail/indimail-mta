#!/bin/sh
# WARNING: This file was auto-generated. Do not edit!
# $Log: versioninfo.in,v $
# Revision 2.5  2009-01-20 10:00:09+05:30  Cprogrammer
# corrected path for config_settings
#
# Revision 2.4  2008-06-04 13:52:39+05:30  Cprogrammer
# added warning that file is auto-generated
#
# Revision 2.3  2008-05-25 17:44:24+05:30  Cprogrammer
# changes for POSIX sort
#
# Revision 2.2  2003-08-02 11:36:14+05:30  Cprogrammer
# changed path to configurable variable indimaildir
#
# Revision 2.1  2002-12-10 23:39:20+05:30  Cprogrammer
# added option to sort on versions
#
# Revision 1.4  2002-07-29 16:36:07+05:30  Cprogrammer
# removed display of configure settings
#
# Revision 1.3  2002-04-12 02:09:05+05:30  Cprogrammer
# *** empty log message ***
#
# Revision 1.2  2002-03-27 15:27:50+05:30  Cprogrammer
# added Version Status field
#
# Revision 1.1  2002-03-27 15:18:27+05:30  Cprogrammer
# Initial revision
#
#
# $Id: versioninfo.in,v 2.5 2009-01-20 10:00:09+05:30 Cprogrammer Stab mbhangui $
#
if [ $# -eq 0 ] ; then
	option="-u -r -n -b -k 3.1,3.4 -k 3.6,3.7 -k 3.9,3 -k 4.1,4.2 -k 4.4,4.5 -k 4.7,4.8"
	#option="-r -n -b +2.0 +2.5 +2.8 +3.0"
elif [ $# -eq 1 ] ; then
	option="-u -t . -k2.4rnb,2 -t . -k 3.1rnb,3.8"
	#option="-r -n -b +1.2"
fi
COUNT1=`@indimaildir@/sbin/config_settings | grep printf | wc -l`
COUNT2=`@indimaildir@/bin/indiversion|wc -l`
DIFF=`expr $COUNT2 - $COUNT1`
(
echo "Source Code                         Version No Date"
@indimaildir@/bin/indiversion | head -$DIFF | awk '{
			if(index($3, "Version"))
				printf("%s\n", $0);
			else
			if(!index($2, "indimail.h,v"))
				printf("%-35s %-10s %s %s %s\n", $2, $3, $4, $5, $7);
			else
			if(NR == 2)
				printf("%-35s %-10s %s %s %s\n", $2, $3, $4, $5, $7);
}' | sort $option | grep -v "Main Program Version"
) | less

