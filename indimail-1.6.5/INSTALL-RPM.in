File INSTALL-RPM, Version @version@
DATE: @DATE@

This section covers installing IndiMail from rpm. This is the easy way out to install IndiMail.

There is also an Installation for Experts. For that read INSTALL-@version@. I would
recommend you to go through the file INSTALL-@version@ so that you undertand IndiMail
better.

You will also find this file as 
http://downloads.sourceforge.net/indimail/INSTALL-RPM-@version@

IndiMail also has yum repositories for most of the Linux Distros at

http://download.opensuse.org/repositories/home:/indimail/

The latest RPM (for yet to be released version) can be found at
http://download.opensuse.org/repositories/home:/indimail/

What the RPM does
-----------------

It depends on whether you are Installing, upgrading or removing IndiMail using the rpm
version. Following are the steps carried out during RPM installation.

A) Package Installation/Upgrade
   1. Stops IndiMail services (in case the system already has IndiMail installed)
   2. Add users (indimail, alias, qmaild, qmaill, qmailp, qmailq, qmailr, qmails, qscand)
      and groups (indimail, nofiles, qmail, qscand)
   3. Installs files/binaries in @indimaildir@
   4. Installs services under supervice in /service
       smtp, smtp - odmr, qmail-send, imap/pop3, indisrvr, inlookup, pwdlookup)
       clamav antivirus service, freshclam - virus signature update service,
       bogofilter spam filter service)
   5. Installs (for installation only) MySQL database for use by IndiMail
      (database in @indimaildir@/mysqldb/data and logs in @indimaildir@/mysqldb/logs)
   6. Sets up svscan to be run by init (/etc/inittab) or by upstart (/etc/event.d)

B) Package Removal
   1. Stops IndiMail services (in case the system already has IndiMail installed)
   2. Delete users (indimail, alias, qmaild, qmaill, qmailp, qmailq, qmailr, qmails, qscand)
      and groups (indimail, nofiles, qmail, qscand)
   3. Removes files/binaries in @indimaildir@
   4. Removes services under supervice in /service
       smtp, smtp - odmr, qmail-send, imap/pop3, indisrvr, inlookup, pwdlookup)
       clamav antivirus service, freshclam - virus signature update service,
       bogofilter spam filter service)
   5. Sets up svscan to be run by init (/etc/inittab) or by upstart (/etc/event.d)
   NOTE: MySQL database is not removed, config files in @indimaildir@/etc,
         @indimaildir@/control, @indimaildir@/users, .qmail files in @indimaildir@/alias,
         domain information in @indimaildir@/domains are not removed.

What the RPM does not do
------------------------
1. Install and configure MySQL (See How to install MySQL below)
2. Configure IndiMail

How to INSTALL
--------------
You need to have MySQL installed on your system (see below on how to install). You can also use an
available rpm for MySQL from www.mysql.com

1) Package Install Instruction
   ---------------------------
   % sudo rpm -ivh indimail-@version@-1.i386
   % sudo dpkg -i indiamil-@version@-1.deb

2) Package Upgrade Instruction
   ---------------------------
   % sudo rpm -Uvh indimail-@version@-1.i386
   % someone please help with this command here

3) Package Removal Instrucation
   ----------------------------
   % sudo rpm -e indimail-@version@-1.i386
   % sudo dpkg -r indiamil-@version@-1.deb

Start IndiMail Services
-----------------------
   Review the email in @indimaildir@/alias/.qmail-postmaster, before starting services

   % sudo init q # (if your system uses traditional init)
       or
   % sudo /sbin/initctl emit qmailstart # (if your system uses upstart - ubuntu/fedora10)

The RPM installation deliberately installs MySQL and fetchmail services in down state.
This is for you to review your MySQL installation and configuration. For fetchmail service
to run, you need to create @indimaildir@/etc/fetchmailrc file. You can use fetchmailconf
for configuring fetchmail. To have these services started automatically during reboot,
delete the files /service/mysql.3306/down and /service/fetchmail/down .

Proceed to SECTION 8 in the file INSTALL-@version@ for further instruction on 
configuration of IndiMail

Log files are creaed in /var/log/indimail/*


How to install MySQL
--------------------

    Install MySQL 5.4.3-beta with MD5 9ea08558d51b1d56d3784028d57c2b08
    current working directory /home/local/src

    You can download mysql-5.4.3-beta.tar.gz from dev.mysql.com
    % gunzip -c mysql-5.4.3-beta.tar.gz |tar xf -
    % cd mysql-5.4.3-beta
    % ./configure --prefix=/usr/local/mysql --enable-local-infile
      (--prefix=/usr in case you are using the RPM from openSUSE build service)
    % make -s DESTDIR=staging_directory
    % sudo make install-strip DESTDIR=staging_directory
    cd ..

Converting RPM to .deb
----------------------
The Ubuntu / Debian systems use the tool dpkg for package management. There is a tool to 
convert .rpm packages to Debian .deb files using called 'alien'.

Install Alien on your system
% sudo apt-get update
% sudo apt-get install alien

Convert the rpm file from .rpm to .deb:
% sudo alien -ck name-of-rpm-file.rpm

To install .deb packages
% dpkg -i name-of-created-deb-file.deb

Alternatively you can simply install rpm files. This command converts rpm to deb
then installs the deb file. After the installation, it will delete the temporary
.deb created.
% sudo alien -i name-of-rpm-file.rpm
