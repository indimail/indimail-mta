#!/bin/sh
set -e
prefix=@prefix@
sysconfdir=/etc
rm=/bin/rm
rmdir=/bin/rmdir

ID=`id -u`
if [ $ID -ne 0 ] ; then
	echo "You are not root" >&2
	exit 1
fi

case "$1" in
    purge|remove|upgrade|failed-upgrade|abort-install|abort-upgrade|disappear)
    ;;

    *)
        echo "postrm called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

# we are doing upgrade or removal
if [ " $1" = " upgrade" ] ; then
	exit 0
fi

case "$1" in
    failed-upgrade|abort-install|abort-upgrade|disappear)
	exit 0
    ;;
esac
if [ " $1" = " remove" ] ; then
	echo "reverting permissions"
	if [ -s ${prefix}/etc/procmail_stat.override -a -f /usr/sbin/dpkg-statoverride ] ; then
		/bin/cat ${prefix}/etc/procmail_stat.override | while read line
		do
			/usr/sbin/dpkg-statoverride --remove $line
		done
		${rm} -f ${prefix}/etc/procmail_stat.override 2>/dev/null || true
		${rmdir} --ignore-fail-on-non-empty ${prefix}/etc 2>/dev/null || true
	fi
fi
